---
title: 編集履歴と元に戻す
banner: 'https://images.yurari.moe/galgame/11042/s9n7toqi_2.jpg'
description: 'Shionlib の編集履歴レコードの確認方法、および管理者が厳格モードまたはカスケードモードを使用して誤った編集を元に戻す方法を解説します。'
date: 2026-02-27
author_uid: 1
author_name: 'ringyuki'
author_avatar: 'https://t.shionlib.com/user/1/avatar/f4d8e6d0-3958-420b-bb86-b2c77be60c33.webp'
---

## 編集履歴を確認する

ゲーム・キャラクター・デベロッパーのすべてのエントリーに編集履歴の入口があり、誰でも閲覧できます。

各履歴レコードには以下が含まれます：

- 編集者のアバターとユーザー名
- 変更されたフィールドの一覧（タグとして表示）
- 編集メモ（ある場合 — クリックで展開）
- 編集日時
- 編集レコード番号（例：`#123`）

レコードが管理者によって元に戻された場合、赤い **元に戻し済み** バッジが表示されます。レコード自体が元に戻す操作である場合、タイトルに **#番号 を元に戻した** と表示され、元のレコードを参照します。

## 変更の比較

履歴レコードをクリックすると、具体的な変更内容を展開して確認できます：

- **テキストフィールド**：変更前後のコンテンツを文字レベルでハイライト表示 — 緑色が追加、赤色が削除
- **リレーション**（カバー・画像・デベロッパー・キャラクターなど）：追加・削除されたエントリーの個別リストと変更前後の比較

## 編集を元に戻す（管理者）

管理者は履歴のうちまだ元に戻されていない編集を元に戻すことができます。レコードの **この編集を元に戻す** ボタンをクリックし、ダイアログで元に戻すモードを選択して確認します。

### 厳格モード

他の編集に影響を与えずに対象レコードのみを元に戻します。

- 後の編集が同じフィールドを変更していた場合、システムが競合を検出して操作を拒否します
- **強制** オプションを有効にすると競合チェックをバイパスして強制実行できますが、データの不整合が生じる可能性があります — 慎重に使用してください

推奨場面：対象の編集が比較的新しく、依存する後続の編集がない場合。

### カスケードモード

対象レコードを元に戻す前に、競合するすべての後続編集を時系列の逆順で自動的に元に戻し、その後対象自体を元に戻します。プロセス全体がデータベーストランザクション内で実行され、原子性が保証されます。

推奨場面：対象の編集が比較的古く、依存する後続の編集があり、一緒にクリーンアップする必要がある場合。

### 元に戻すレコードの記録

元に戻す操作が成功すると、システムは編集履歴に **#番号 を元に戻した** とラベル付けされた新しいレコードを書き込み、元のレコードに **元に戻し済み** バッジを付けて、完全な監査証跡を形成します。

> 各編集レコードは一度しか元に戻すことができません。
